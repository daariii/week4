(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[90534],{989881:(e,o,t)=>{var a=t(247816),s=t(899291)(a);e.exports=s},702958:(e,o,t)=>{var a=t(646384),s=t(690939);e.exports=function(e,o,t,r){var l=t.length,i=l,n=!r;if(null==e)return!i;for(e=Object(e);l--;){var d=t[l];if(n&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<i;){var c=(d=t[l])[0],_=e[c],h=d[1];if(n&&d[2]){if(void 0===_&&!(c in e))return!1}else{var u=new a;if(r)var b=r(_,h,c,e,o,u);if(!(void 0===b?s(h,_,3,r,u):b))return!1}}return!0}},267206:(e,o,t)=>{var a=t(191573),s=t(716432),r=t(406557),l=t(701469),i=t(139601);e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?l(e)?s(e[0],e[1]):a(e):i(e)}},269199:(e,o,t)=>{var a=t(989881),s=t(498612);e.exports=function(e,o){var t=-1,r=s(e)?Array(e.length):[];return a(e,(function(e,a,s){r[++t]=o(e,a,s)})),r}},191573:(e,o,t)=>{var a=t(702958),s=t(301499),r=t(542634);e.exports=function(e){var o=s(e);return 1==o.length&&o[0][2]?r(o[0][0],o[0][1]):function(t){return t===e||a(t,e,o)}}},716432:(e,o,t)=>{var a=t(690939),s=t(227361),r=t(379095),l=t(115403),i=t(689162),n=t(542634),d=t(240327);e.exports=function(e,o){return l(e)&&i(o)?n(d(e),o):function(t){var l=s(t,e);return void 0===l&&l===o?r(t,e):a(o,l,3)}}},882689:(e,o,t)=>{var a=t(829932),s=t(297786),r=t(267206),l=t(269199),i=t(571131),n=t(307518),d=t(285022),c=t(406557),_=t(701469);e.exports=function(e,o,t){o=o.length?a(o,(function(e){return _(e)?function(o){return s(o,1===e.length?e[0]:e)}:e})):[c];var h=-1;o=a(o,n(r));var u=l(e,(function(e,t,s){return{criteria:a(o,(function(o){return o(e)})),index:++h,value:e}}));return i(u,(function(e,o){return d(e,o,t)}))}},840371:e=>{e.exports=function(e){return function(o){return null==o?void 0:o[e]}}},379152:(e,o,t)=>{var a=t(297786);e.exports=function(e){return function(o){return a(o,e)}}},571131:e=>{e.exports=function(e,o){var t=e.length;for(e.sort(o);t--;)e[t]=e[t].value;return e}},626393:(e,o,t)=>{var a=t(733448);e.exports=function(e,o){if(e!==o){var t=void 0!==e,s=null===e,r=e==e,l=a(e),i=void 0!==o,n=null===o,d=o==o,c=a(o);if(!n&&!c&&!l&&e>o||l&&i&&d&&!n&&!c||s&&i&&d||!t&&d||!r)return 1;if(!s&&!l&&!c&&e<o||c&&t&&r&&!s&&!l||n&&t&&r||!i&&r||!d)return-1}return 0}},285022:(e,o,t)=>{var a=t(626393);e.exports=function(e,o,t){for(var s=-1,r=e.criteria,l=o.criteria,i=r.length,n=t.length;++s<i;){var d=a(r[s],l[s]);if(d)return s>=n?d:d*("desc"==t[s]?-1:1)}return e.index-o.index}},899291:(e,o,t)=>{var a=t(498612);e.exports=function(e,o){return function(t,s){if(null==t)return t;if(!a(t))return e(t,s);for(var r=t.length,l=o?r:-1,i=Object(t);(o?l--:++l<r)&&!1!==s(i[l],l,i););return t}}},301499:(e,o,t)=>{var a=t(689162),s=t(3674);e.exports=function(e){for(var o=s(e),t=o.length;t--;){var r=o[t],l=e[r];o[t]=[r,l,a(l)]}return o}},689162:(e,o,t)=>{var a=t(513218);e.exports=function(e){return e==e&&!a(e)}},542634:e=>{e.exports=function(e,o){return function(t){return null!=t&&(t[e]===o&&(void 0!==o||e in Object(t)))}}},139601:(e,o,t)=>{var a=t(840371),s=t(379152),r=t(115403),l=t(240327);e.exports=function(e){return r(e)?a(l(e)):s(e)}},720247:(e,o,t)=>{function a(e){let o=!1;return{promise:new Promise(((t,a)=>{e.then((e=>o?a({isCanceled:!0}):t(e)),(e=>a(o?{isCanceled:!0}:e)))})),cancel(){o=!0}}}t.d(o,{Z:()=>a})},730447:(e,o,t)=>{t.d(o,{Z:()=>r});var a=t(667294),s=t(254469);function r({allowSearchOnMount:e,children:o,onTypeaheadSuggestionsChange:t,resourceName:r,resourceOptions:l,value:i}){const n=(0,s.Z)({allowSearchOnMount:e,resourceName:r,resourceOptions:l,value:i});return(0,a.useEffect)((()=>{null!=n&&n.length&&t(n)}),[n]),o||null}},254469:(e,o,t)=>{t.d(o,{Z:()=>d});var a=t(667294);const s=function(e,o){this.uid=e,this.item=o,this.next=null,this.prev=null},r=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};r.prototype.set=function(e,o){let t=this._uidToData[e];t||(t=new s(e,o),this._uidToData[e]=t,this._numItems+=1),this._moveToFront(t),this._numItems>this._maxNumItems&&this._evict()},r.prototype.get=function(e){const o=this._uidToData[e];return o?(this._moveToFront(o),o.item):null},r.prototype.remove=function(e){const o=this._uidToData[e];o&&(delete this._uidToData[e],this._firstData===o&&(this._firstData=o.next),this._lastData===o&&(this._lastData=o.prev),o.prev&&(o.prev.next=o.next),o.next&&(o.next.prev=o.prev),this._numItems-=1)},r.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},r.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};const l=r;var i=t(6637);function n({resourceName:e,resourceOptions:o}){const t={...o,count:"count"in o?o.count:5},a=i.ZP.create(e,t),s=new l,r=()=>{a.abort()};return async function(e,o){const t=s.get(`${o}-${e}`);if(t){const o=t.items;if(o&&o.length){r();return{hint:t.hint,items:o,term:e}}}return e.length>=0?(async(e,o)=>{var t;if(a.isCalling()){var l,i;const t=null===(l=a.options)||void 0===l?void 0:l.term,s=null===(i=a.options)||void 0===i?void 0:i.pin_scope;if(e===t&&o===s)return;r()}const{bookmarks:n,...d}=a.options||{};a.options={...d,term:e,pin_scope:o};const c=null===(t=(await a.callGet({showError:!1})).resource_response)||void 0===t?void 0:t.data,_=null==c?void 0:c.items,h=(null==c?void 0:c.hint)||{},u={hint:h,items:_};return s.set(`${o}-${e}`,u),{term:e,items:_,hint:h}})(e,o):{hint:{},items:[],term:e}}}function d({allowSearchOnMount:e=!1,resourceName:o,resourceOptions:t={},value:s}){const r=(0,a.useRef)(!1),l=(0,a.useRef)({}),[i,d]=(0,a.useState)([]),c=function({resourceName:e,resourceOptions:o}){const t=(0,a.useRef)();return t.current||(t.current=n({resourceName:e,resourceOptions:o})),t.current}({resourceName:o,resourceOptions:t}),_=t.pin_scope||"pins",h=`${_}-${s}`;return(0,a.useEffect)((()=>{(async()=>{if(null!=s&&(e||r.current))if(h in l.current)d(l.current[h]);else try{const e=await c(s,_);if(e){const{items:o}=e;l.current[h]=o,d(o)}}catch(o){if("Resource call aborted"===o)return;throw o}r.current||(r.current=!0)})()}),[s,_,h]),i}},845772:(e,o,t)=>{t.d(o,{Z:()=>l});var a=t(717615),s=t(19121),r=t(231947);const l=()=>{const e=(0,s.Z)(),o=(0,a.Z)();return(0,r.lJ)(e,o)}},787294:(e,o,t)=>{t.d(o,{Z:()=>B});var a=t(667294),s=t(966338),r=t(121151),l=t(898781),i=t(349700),n=t(780280),d=t(883119),c=t(785893);function _({boardName:e,collaboratorName:o,onCancelTransferRequest:t,onDismiss:a}){const s=(0,l.ZP)(),_=(0,n.B)();return(0,c.jsx)(r.ZP,{accessibilityModalLabel:s._('Board ownership transfer modal', 'boardCollabOwnershipTransferModal.accessibilityModalLabel', 'Accessibility label on board ownership transfer modal'),heading:(0,c.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(d.X6,{align:"center",size:"500",children:s._('Collaborators', 'boardCollabOwnershipTransferModal.heading', 'Heading for board ownership transfer modal')}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:_.isRTL,right:!_.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:s._('Close', 'boardCollabOwnershipTransferModal.iconAccessibilityLabel', 'Accessibility label on cancel icon button'),icon:"cancel",iconColor:"darkGray",onClick:a})})]}),footer:(0,c.jsxs)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,c.jsx)(d.iP,{fullWidth:!1,onTap:t,children:(0,c.jsx)(d.xv,{weight:"bold",children:s._('Cancel request', 'boardCollabOwnershipTransferModal.cancelRequest', 'Option to cancel board ownership transfer request')})}),(0,c.jsx)(d.zx,{color:"red",onClick:a,size:"lg",text:s._('Got it', 'boardCollabOwnershipTransferModal.confirmationButton', 'Button confirming board ownership transfer action')})]}),onDismiss:a,children:(0,c.jsx)(d.xu,{paddingX:8,children:(0,c.jsx)(d.xv,{align:"center",children:(0,i.nk)(s._('We sent {{ collaboratorName }} your request for them to own {{ boardName }}. When they accept, you can still add Pins\u2014but you won\u2019t be able to manage collaborators, change the name, cover photo, or description of this board.', 'boardCollabOwnershipTransferModal.descriptionText', 'Explanation of transfer request and potential permissions changes'),{collaboratorName:o,boardName:(0,c.jsx)(d.xv,{inline:!0,weight:"bold",children:e})})})})})}var h=t(715519),u=t(98265);function b({boardId:e,collaboratorId:o,collaboratorName:t,isAcceptedCollaborator:r,onDelete:i}){const n=(0,s.useDispatch)(),b=(0,l.ZP)(),p=(0,a.useRef)(null),[m,g]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),{boardName:f,pendingOwnershipTransfer:C}=(0,h.Z)(),P=()=>{n((0,u.xx)(e,o)),g(!1)},j=function({i18n:e,isAcceptedCollaborator:o,onCancelTransferRequest:t,onDelete:a,onRequestTransfer:s,showCancelRequestOption:r,showRequestTransferOption:l}){const i=[{onSelect:a,option:{value:"Remove from board",label:e._('Remove from board', 'getCollaboratorDropdownItems.removeText', 'Text for option to remove collaborator from board')}}];return o&&(r&&i.push({onSelect:t,option:{value:"Cancel request",label:e._('Cancel request', 'getCollaboratorDropdownItems.cancelText', 'Text for option to cancel ownership transfer request')}}),l&&i.push({onSelect:s,option:{value:"Request as board owner",label:e._('Request as board owner', 'getCollaboratorDropdownItems.requestText', 'Text for option to request ownership transfer')}})),i}({i18n:b,isAcceptedCollaborator:r,onCancelTransferRequest:P,onDelete:i,onRequestTransfer:()=>{(async()=>{g(!1),await n((0,u.Cf)(e,o)),x(!0)})()},showCancelRequestOption:C===o,showRequestTransferOption:!C});return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsxs)(d.kC,{justifyContent:"center",children:[(0,c.jsx)(d.hU,{accessibilityLabel:b._('Collaborator options', 'boardCollabInviteOverflowButton.accessibilityLabel', 'Accessibility label for overflow icon button'),bgColor:"transparent",icon:"ellipsis",iconColor:"darkGray",onClick:()=>g(!m),ref:p,selected:m}),m&&(0,c.jsx)(d.Lt,{anchor:p.current,id:"board-collaborator-dropdown",idealDirection:"down",onDismiss:()=>g(!1),zIndex:new d.Ry(1e3),children:(0,c.jsx)(d.Lt.Section,{label:b._('Options', 'boardCollabInviteOverflowButton.dropdownSection', 'Options section in dropdown menu'),children:j.map((e=>(0,c.jsx)(d.Lt.Item,{onSelect:e.onSelect,option:e.option},e.option.value)))})})]}),v&&(0,c.jsx)(_,{boardName:f,collaboratorName:t,onCancelTransferRequest:()=>{P(),x(!1)},onDismiss:()=>{x(!1)}})]})}var p=t(381297),m=t(985913),g=t(19121),v=t(217468);function x({actionsDisabled:e,invite:o,invitedUser:t,isDim:a,onApprove:s,onDelete:r}){const i=(0,l.ZP)(),n=(0,g.Z)(),{access:_,board:u,status:x,invited_by_user:f}=o,{pendingOwnershipTransfer:C,viewerIsOwner:P}=(0,h.Z)(),j=n.isAuth&&t.id===n.id,A=n.isAuth&&f.id===n.id,z=t.id===f.id,y="accepted"===x,w=_.includes("approve"),B=_.includes("delete"),I=i._('Approve', '[button] approve another pinner\'s request to join the board as a collaborator', '[button] approve another pinner\'s request to join the board as a collaborator'),k=((e,o,t)=>e?i._('Leave', '[button] for a collaborator to leave a group board', '[button] for a collaborator to leave a group board'):o&&!t?i._('Decline', '[button] decline another pinner\'s request to join board as a collaborator', '[button] decline another pinner\'s request to join board as a collaborator'):i._('Remove', '[button] remove a collaborator from the board]', '[button] remove a collaborator from the board]'))(j,z,y),S=B&&!w,T=B&&w,E=`/${t.username}/`,D=(0,v.t)("web_board_ownership_transfer"),R=P&&D().anyEnabled,M=R?(0,c.jsx)(b,{boardId:u.id,collaboratorId:t.id,collaboratorName:t.full_name,onDelete:r||(()=>{}),isAcceptedCollaborator:y}):(0,c.jsx)(d.zx,{disabled:e,onClick:r,text:k,size:"lg"}),Z=C===t.id,L=R&&(void 0!==a?a:!y);return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(p.Z,{imageUrl:t.image_medium_url||"",name:t.full_name,title:t.full_name,subtitle:((e,t,a,s,r)=>{const l=o.invited_by_user.full_name;let n;return n=t?i._('Invitation pending', 'boardCollabInviteCell.pendingInvitationText', 'Subtext for collaborator with pending invitation'):a?i._('That\'s you', 'subtext for current user who requested to join this board', 'subtext for current user who requested to join this board'):s?i._('Invited by you', 'subtext for a pending collaborator who was invited by the current viewer', 'subtext for a pending collaborator who was invited by the current viewer'):r?i._('Requested to join', 'The subtext that identifies a pending collaborator has personally requested to join the board', 'The subtext that identifies a pending collaborator has personally requested to join the board'):(0,m.Z)(i._('Invited by {{ user_full_name }}', 'The subtext that identifies a pending collaborator who was invited to collaborate on the board', 'The subtext that identifies a pending collaborator who was invited to collaborate on the board'),{user_full_name:l}),e&&(n=n.concat(i._(' \xB7 Ownership pending', 'boardCollabInviteCell.pendingOwnershipText', 'Additional subtext for collaborator who has a pending board ownership transfer invitation'))),n})(Z,L,j,A,z),linkURL:E,isDim:!R&&(void 0!==a?a:!y),accessory:S&&M}),T&&(0,c.jsxs)(d.xu,{paddingX:3,marginStart:12,display:"flex",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,disabled:e,onClick:r,text:k,size:"lg"})}),(0,c.jsx)(d.xu,{paddingX:1,flex:"grow",width:"50%",children:(0,c.jsx)(d.zx,{fullWidth:!0,color:"red",disabled:e,onClick:s,text:I,size:"lg"})})]})]})}var f=t(499128),C=t(934523);function P(e){const o=(0,l.ZP)(),{onCancel:t,onRemove:a,useGestaltModal:s}=e,i=o._('Are you sure you want to leave this group board and remove it from your profile?', ' - ', ' -- '),n=s?d.u_:r.ZP;return(0,c.jsx)(n,{accessibilityModalLabel:o._('Leave board?', ' - ', ' -- '),heading:o._('Leave board?', ' - ', ' -- '),onDismiss:t,size:"sm",footer:(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"end",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:t,text:o._('Cancel', ' - ', ' -- ')})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:a,text:o._('Leave', ' - ', ' -- ')})})]}),children:(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:i})})})}class j extends a.Component{constructor(...e){var o,t,a;super(...e),a={shouldBlock:!1},(t="state")in(o=this)?Object.defineProperty(o,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[t]=a}getBlockDescription(e,o){return"declineRequest"===e?o?(0,i.nk)(this.props.i18n._('This will decline {{ invited_user_first_name }} from joining this board and block them from subsequent collaboration requests.', 'decline another pinner\'s request to join board as a collaborator and block them', 'decline another pinner\'s request to join board as a collaborator and block them'),{invited_user_first_name:o}):this.props.i18n._('This will decline this person from joining this board and block them from subsequent collaboration requests.', 'message that explains consequences of declining a request to join board as a collaborator', 'message that explains consequences of declining a request to join board as a collaborator'):o?(0,i.nk)(this.props.i18n._('This will remove {{ invited_user_first_name }}, people {{ invited_user_first_name }} invited, and all their Pins.', ' - ', ' -- '),{invited_user_first_name:o}):this.props.i18n._('This will remove this person, people they invited, and all their Pins.', 'message that explains consequences of removing a collaborator', 'message that explains consequences of removing a collaborator')}render(){const{removeType:e,firstName:o,fullName:t,onCancel:s,onRemove:l,onRemoveAndBlock:n,useGestaltModal:_}=this.props,h="declineRequest"===e?(0,i.nk)(this.props.i18n._('Decline {{ invited_user_name }}?', '[button] to decline a pinner\'s request to join a board as a collaborator', '[button] to decline a pinner\'s request to join a board as a collaborator'),{invited_user_name:t}).join(""):(0,i.nk)(this.props.i18n._('Remove {{ invited_user_name }}?', '[button] to remove a pinner as a collaborator from a group board', '[button] to remove a pinner as a collaborator from a group board'),{invited_user_name:t}).join(""),u=this.props.i18n._('This will keep them from saving Pins to this board. You can also:', 'decline another pinner\'s request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.', 'decline another pinner\'s request to join board as collaborator. Ending fragment preceeds checkbox for blocking the user.'),b=this.getBlockDescription(e,o),p=this.state.shouldBlock?this.props.i18n._('Block', 'block another pinner after denying their request to collaborate on a board', 'block another pinner after denying their request to collaborate on a board'):this.props.i18n._('Remove', 'decline another pinner\'s request to collaborate on a board', 'decline another pinner\'s request to collaborate on a board'),m=(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(d.xu,{padding:5,children:(0,c.jsx)(d.xv,{children:u})}),(0,c.jsx)(d.iz,{}),(0,c.jsxs)(d.xu,{padding:5,display:"flex",children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.XZ,{checked:this.state.shouldBlock,id:"banUser",name:"ban",onChange:()=>this.setState((({shouldBlock:e})=>({shouldBlock:!e})))})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsxs)(d.__,{htmlFor:"banUser",children:[(0,c.jsx)(d.xv,{weight:"bold",children:(0,i.nk)(this.props.i18n._('Block {{ name }}', ' - ', ' -- '),{name:o||""})}),(0,c.jsx)(d.xv,{size:"200",children:b})]})})]})]}),g=_?d.u_:r.ZP;return(0,c.jsx)(g,{accessibilityModalLabel:h,heading:h,onDismiss:s,size:"sm",footer:(0,c.jsxs)(d.xu,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1,children:[(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{onClick:s,text:this.props.i18n._('Cancel', ' - ', ' -- ')})}),(0,c.jsx)(d.xu,{paddingX:1,children:(0,c.jsx)(d.zx,{color:"red",onClick:this.state.shouldBlock?n:l,text:p})})]}),children:m})}}function A(e){const o=(0,l.ZP)();return(0,c.jsx)(j,{...e,i18n:o})}var z=t(343341);function y(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}class w extends a.Component{constructor(...e){super(...e),y(this,"state",{currentModal:null,loading:!1}),y(this,"showRemoveSuccessToast",(()=>{const{toastManagerContext:e}=this.props,o=this.props.i18n._('Collaborator removed', 'BoardCollabInviteCellContainer.toast', 'Toast for removing a collaborator from a board');e.showOneToast((({hideToast:e})=>(0,c.jsx)(f.ZP,{duration:3e3,onHide:e,text:o})))})),y(this,"onDelete",(()=>{const{onModalOpen:e}=this.props;e&&e(),this.setState({currentModal:"delete"})})),y(this,"onApprove",(()=>{const{approveBoardCollabInvite:e,onInviteDidUpdate:o}=this.props;this.setState({loading:!0}),e().then(o).finally((()=>{this.setState({loading:!1})}))})),y(this,"deleteBoardInvite",((e=!1)=>{const{deleteBoardCollabInvite:o,onBoardLeave:t,onInviteDidUpdate:a}=this.props,s=this.isViewerInvitedUser;this.setState({currentModal:null,loading:!0}),o(s,e).then((()=>{a(),this.showRemoveSuccessToast(),s&&t()})).catch((()=>{})).finally((()=>{this.setState({loading:!1})}))})),y(this,"handleDeleteBoardInvite",(()=>{this.deleteBoardInvite(!1)})),y(this,"handleDeleteBoardInviteAndBan",(()=>{this.deleteBoardInvite(!0)})),y(this,"handleHideModal",(()=>{this.setState({currentModal:null})}))}get isViewerInvitedUser(){const{viewer:e,invitedUser:o}=this.props;return e.isAuth&&e.id===o.id}get isRequestToJoin(){const{invitedUser:e,invite:{invited_by_user:o}}=this.props;return e.id===o.id}renderCurrentModal(){const{invitedUser:e,useGestaltModal:o=!1}=this.props,{currentModal:t}=this.state;return"delete"===t?this.isViewerInvitedUser?(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:C.fe+1}},children:(0,c.jsx)(P,{onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,useGestaltModal:o})}):(0,c.jsx)(d.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:C.fe+1}},children:(0,c.jsx)(A,{removeType:this.isRequestToJoin?"declineRequest":"removeCollaborator",firstName:e.first_name,fullName:e.full_name,onCancel:this.handleHideModal,onRemove:this.handleDeleteBoardInvite,onRemoveAndBlock:this.handleDeleteBoardInviteAndBan,useGestaltModal:o})}):null}render(){const{invite:e,invitedUser:o,isDim:t}=this.props,{loading:a}=this.state;return(0,c.jsxs)(d.xu,{children:[(0,c.jsx)(x,{invite:e,invitedUser:o,isDim:t&&"accepted"!==e.status,onDelete:this.onDelete,onApprove:this.onApprove,actionsDisabled:a}),this.renderCurrentModal()]})}}function B(e){const{invite:o,invitedUser:{id:t},invite:{board:{id:a}}}=e,r=(0,l.ZP)(),i=(0,s.useDispatch)();return(0,c.jsx)(w,{...e,approveBoardCollabInvite:()=>i((0,u.q1)(a,t)),deleteBoardCollabInvite:(e,t)=>i((0,u.Jn)(o,e,t)),i18n:r,toastManagerContext:(0,z.F9)(),viewer:(0,g.Z)()})}},353068:(e,o,t)=>{t.d(o,{Z:()=>m});var a=t(667294),s=t(787294),r=t(596222),l=t(898781),i=t(883119),n=t(785893);function d({fetchMore:e,invites:o,isAtEnd:t,isFetching:a,onBoardLeave:s,refreshData:d,renderInvite:c,scroll:_}){const h=(0,l.ZP)();return(0,n.jsxs)(i.xu,{children:[_&&(0,n.jsx)(r.Z,{scrollBuffer:3*_.container.clientHeight,scrollHeight:_.container.scrollHeight,scrollTop:_.top,isAtEnd:t,isFetching:a,fetchMore:e}),o.map(((e,o)=>e&&e.invited_user&&e.invited_user.id?(0,n.jsx)(i.xu,{children:c(e,s,d)},o):null)),a&&!t&&(0,n.jsx)(i.$j,{accessibilityLabel:h._('loading board invites', 'accessibility label for board collaborator invites loading spinner', 'accessibility label for board collaborator invites loading spinner'),show:!0})]})}var c=t(381297),_=t(169158),h=t(715519),u=t(784590),b=t(349700);class p extends a.Component{constructor(...e){var o,t,a;super(...e),a=()=>{const{invitesPendingApproval:e,invites:o}=this.props;e.refresh(),o.refresh()},(t="handleInvitesDidUpdate")in(o=this)?Object.defineProperty(o,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[t]=a}shouldComponentUpdate(e){const{invites:{data:o},pendingOwnershipTransfer:t}=e,{invites:{data:a},pendingOwnershipTransfer:s}=this.props;return!(a&&!(s!==t))||!!o&&a.length!==o.length}render(){var e,o;const{board:t,invites:r,invitesPendingApproval:l,scrollInfo:h,onBoardLeave:u,onModalOpen:p,pendingOwnershipTransfer:m,renderInvite:g}=this.props,{full_name:v,image_medium_url:x,username:f}=t.owner,C=null===(e=(r.data||[]).find((e=>{var o;return(null===(o=e.invited_user)||void 0===o?void 0:o.id)===m})))||void 0===e||null===(o=e.invited_user)||void 0===o?void 0:o.full_name,P=m&&C?(0,b.nk)(this.props.i18n._('Requested {{ collaboratorName }} to change to board owner', 'boardInviteSheet.CollaboratorList.boardOwner.ownershipRequestSubtitle', 'Subtext for an owner of board who has sent an ownership transfer request'),{collaboratorName:C}).join(""):this.props.i18n._('Owner of this board', 'boardInviteSheet.CollaboratorList.boardOwner.subtitle', 'The subtext that identifies the owner of a board');return(0,n.jsx)(a.Fragment,{children:r.isLoaded||l.isLoaded?(0,n.jsx)(_.Z,{fetchMore:r.fetchMore,children:({onScroll:e,setRef:o})=>(0,n.jsxs)(i.xu,{width:"100%",onScroll:e,ref:o,children:[(0,n.jsx)(d,{fetchMore:l.fetchMore,invites:l.data||[],isAtEnd:l.isAtEnd,isFetching:l.isFetching,onBoardLeave:u,refreshData:this.handleInvitesDidUpdate,scroll:h,renderInvite:g}),(l.data||[]).length>0?(0,n.jsx)(i.xu,{paddingY:3,children:(0,n.jsx)(i.iz,{})}):null,(0,n.jsxs)(i.xu,{paddingY:1,children:[(0,n.jsx)(c.Z,{imageUrl:null!=x?x:"",linkURL:`/${f}/`,name:null!=v?v:"",subtitle:P,title:null!=v?v:""}),(r.data||[]).map((e=>e&&e.invited_user&&e.invited_user.id?(0,n.jsx)(s.Z,{invite:e,invitedUser:e.invited_user,onBoardLeave:u,onModalOpen:p,onInviteDidUpdate:r.refresh},e.invited_user.id):null))]})]})}):(0,n.jsx)(i.$j,{show:!0,accessibilityLabel:this.props.i18n._('Loading', 'Loading state for showing board collaborators', 'Loading state for showing board collaborators')})})}}function m(e){const o=(0,l.ZP)(),{pendingOwnershipTransfer:t}=(0,h.Z)(),a=(0,u.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,allow_stale:!1}}),s=(0,u.Z)({name:"BoardInvitesResource",options:{board_id:e.board.id,field_set_key:"boardEdit",status_filters:"pending_approval",allow_stale:!1}});return(0,n.jsx)(p,{...e,invites:a,invitesPendingApproval:s,i18n:o,pendingOwnershipTransfer:t})}},381297:(e,o,t)=>{t.d(o,{Z:()=>n});var a=t(667294),s=t(116303),r=t(149230),l=t(883119),i=t(785893);function n(e){const{imageUrl:o,name:t,title:n,subtitle:d,accessory:c,linkURL:_,isDim:h}=e,u={__style:{opacity:h?.5:1}},b=(0,r.Z)({url:null!=_?_:""})?"nofollow":"none";return(0,i.jsx)(a.Fragment,{children:t&&n&&(0,i.jsxs)(l.xu,{display:"flex",alignItems:"center",paddingX:4,marginBottom:4,children:[(0,i.jsx)(l.xu,{marginEnd:2,dangerouslySetInlineStyle:u,children:(0,i.jsx)(l.iP,{role:"link",rel:b,href:_||"",rounding:"circle",children:(0,i.jsx)(s.Z,{outline:!0,size:"md",name:t,src:o})})}),(0,i.jsxs)(l.xu,{display:"flex",flex:"grow",alignItems:"stretch",direction:"column",dangerouslySetInlineStyle:u,children:[(0,i.jsx)(l.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:(0,i.jsx)(l.rU,{rel:b,href:_||"",children:n})}),(0,i.jsx)(l.xv,{lineClamp:1,size:"100",color:"subtle",children:d})]}),c&&(0,i.jsx)(l.xu,{marginStart:4,children:c})]})})}},326285:(e,o,t)=>{t.d(o,{Z:()=>r});var a=t(883119),s=t(785893);function r(e){const{iconNode:o,title:t,subtitle:r,accessory:l,inContactsSearchform:i}=e;return(0,s.jsxs)(a.xu,{display:"flex",alignItems:"center",paddingX:4,paddingY:2,children:[(0,s.jsx)(a.xu,{marginEnd:i?4:2,children:o}),(0,s.jsxs)(a.kC,{alignItems:"start",direction:"column",flex:"grow",justifyContent:"start",children:[(0,s.jsx)(a.xv,{color:"default",size:"300",lineClamp:1,weight:"bold",children:t}),(0,s.jsx)(a.xv,{lineClamp:1,size:"100",color:"subtle",children:r})]}),l&&(0,s.jsx)(a.xu,{children:l})]})}},715519:(e,o,t)=>{t.d(o,{Z:()=>d,k:()=>n});var a=t(667294),s=t(425288),r=t(785893);const{Provider:l,useHook:i}=(0,s.Z)("BoardOwnershipTransferContext");function n({boardName:e="",children:o,pendingOwnershipTransfer:t=null,viewerIsOwner:s}){const i=(0,a.useMemo)((()=>({boardName:e,pendingOwnershipTransfer:t,viewerIsOwner:s})),[e,t,s]);return(0,r.jsx)(l,{value:i,children:o})}const d=i},109592:(e,o,t)=>{t.d(o,{Z:()=>i});var a=t(121151),s=t(898781),r=t(883119),l=t(785893);function i({cancelButtonLabel:e,confirmButtonLabel:o,heading:t,message:i,onCancel:n,onConfirm:d}){const c=(0,s.ZP)(),_=t||c._('Are you sure?', ' - ', ' -- '),h=e||c._('Cancel', ' - ', ' -- ');return(0,l.jsx)(a.ZP,{accessibilityModalLabel:_,footer:(0,l.jsxs)(r.xu,{marginEnd:-1,marginStart:-1,children:[(0,l.jsx)(r.xu,{"data-test-id":"cancel-button",padding:1,children:(0,l.jsx)(r.zx,{fullWidth:!0,onClick:n,size:"lg",text:h})}),(0,l.jsx)(r.xu,{"data-test-id":"confirm-button",padding:1,children:(0,l.jsx)(r.zx,{fullWidth:!0,color:"red",onClick:d,size:"lg",text:o})})]}),heading:_,onDismiss:n,role:"alertdialog",children:(0,l.jsx)(r.xu,{padding:4,children:(0,l.jsx)(r.xv,{children:i})})})}},596222:(e,o,t)=>{t.d(o,{Z:()=>s});var a=t(667294);class s extends a.PureComponent{constructor(...e){var o,t,a;super(...e),a=()=>{const{isAtEnd:e,isFetching:o,fetchMore:t,scrollBuffer:a,scrollHeight:s,scrollTop:r}=this.props;e||o||r+a>s&&t()},(t="check")in(o=this)?Object.defineProperty(o,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[t]=a}componentDidMount(){setTimeout(this.check)}componentDidUpdate(){this.check()}render(){return null}}},978776:(e,o,t)=>{t.d(o,{Z:()=>N});var a=t(667294),s=t(161702),r=t(109592),l=t(883119),i=t(785893);const n=({label:e,labelId:o})=>o?(0,i.jsx)(l.__,{htmlFor:o,children:(0,i.jsx)(l.xv,{size:"100",children:e})}):(0,i.jsx)(l.xv,{size:"100",children:e});function d(e){const{children:o,label:t,labelId:s}=e;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(l.xu,{marginBottom:2,children:(0,i.jsx)(n,{label:t,labelId:s})}),o]})}var c=t(898781),_=t(780280);const h=138;function u({coverPin:e,handleShowBoardCoverEditModal:o}){const t=(0,c.ZP)(),[s,r]=(0,a.useState)(!1),{isRTL:n}=(0,_.B)();return(0,i.jsx)(d,{label:t._('Board cover', 'BoardForm.BoardFormCoverButton', 'Form label for updating board cover'),children:(0,i.jsx)(l.xu,{width:h,position:"relative",children:(0,i.jsx)(l.iP,{onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTap:o,rounding:4,children:null!=e&&e.custom_cover?(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(l.zd,{height:h,rounding:4,width:h,children:(0,i.jsx)(l.Ee,{alt:e.image_url,color:"gray",fit:"cover",naturalHeight:e.size&&e.size[0]||h,naturalWidth:e.size&&e.size[0]||h,src:e.image_url})}),(0,i.jsx)(l.xu,{position:"absolute",left:n,right:!n,bottom:!0,padding:2,children:(0,i.jsx)(l.xu,{alignItems:"center",display:"flex",height:44,justifyContent:"center",rounding:"circle",width:44,dangerouslySetInlineStyle:{__style:{background:s?"white":"rgba(255, 255, 255, 0.8)"}},children:(0,i.jsx)(l.JO,{accessibilityLabel:t._('Edit board cover', 'BoardForm.BoardFormBoardCoverButton', 'Accessibility label on icon'),icon:"edit",color:"default",size:16})})})]}):(0,i.jsx)(l.xu,{alignItems:"center",color:s?"darkWash":"lightGray",display:"flex",height:h,justifyContent:"center",rounding:4,width:h,children:(0,i.jsx)(l.JO,{accessibilityLabel:t._('Add cover photo', 'BoardForm.BoardFormCoverButton', 'Accessibility label on icon'),color:"default",icon:"add",size:24})})})})})}function b({children:e,label:o,labelId:t,subtext:s}){return(0,i.jsx)(a.Fragment,{children:(0,i.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"start",paddingY:1,children:[e,(0,i.jsx)(l.xu,{marginStart:2,children:(0,i.jsxs)(l.__,{htmlFor:t,children:[(0,i.jsx)(l.xv,{size:"300",weight:"bold",children:o}),s]})})]})})}function p({hasCollabBoardEmail:e,isCollaborative:o,onCheckboxChange:t}){const a=(0,c.ZP)();return o&&(0,i.jsx)(b,{label:a._('Email notifications', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Form label'),labelId:"emailNotificationsCheckbox",subtext:(0,i.jsx)(l.xv,{color:"subtle",size:"300",children:a._('Get an email when someone saves Pins to this board', 'BoardForm.BoardFormCollaboratorsEmailCheckbox', 'Text explaing field on board form')}),children:(0,i.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,i.jsx)(l.xu,{marginEnd:1,children:(0,i.jsx)(l.XZ,{checked:e,id:"emailNotificationsCheckbox",name:"email",onChange:t})})})})}var m=t(681650),g=t(349700);function v({board:e,onCollaboratorInviteClick:o}){var t;const a=(0,c.ZP)(),s=(0,m.Z)({boardId:e.id,ownerName:null!==(t=e.owner.full_name)&&void 0!==t?t:"",ownerUsername:e.owner.username,ownerImgSrc:e.owner.image_medium_url||e.owner.image_small_url||""}),r=s.slice(0,3).map((e=>e.name));let n="";switch(s.length){case 3:n=(0,g.Wc)(`${a._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')}`,{first:`${r[0]}`,second:`${r[1]}`,last:`${r[2]}`});break;case 2:n=(0,g.Wc)(`${a._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')}`,{first:`${r[0]}`,second:`${r[1]}`});break;default:n=r.join(", ")}const d=s.length>3?(0,g.Wc)(a.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', s.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars'),{userNames:n,leftCount:""+(s.length-3)}):(0,g.Wc)(`${a._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')}`,{userNames:n});return(0,i.jsxs)(l.kC,{alignItems:"center",justifyContent:"between",children:[(0,i.jsx)(l.HE,{accessibilityLabel:d,collaborators:s.map((({name:e,src:o})=>({src:null!=o&&o.endsWith("/default_75.png")?void 0:o,name:e}))),size:"md"}),(0,i.jsx)(l.hU,{accessibilityLabel:a._('Invite collaborators', 'BoardEdit.BoardCollaboratorsAndInviteSection', 'Accessibility label on button'),bgColor:"lightGray",icon:"add",iconColor:"darkGray",onClick:o,size:"lg"})]})}var x=t(948618),f=t(966113);function C({board:e,onCollaboratorInviteClick:o}){const t=(0,c.ZP)(),a=(0,i.jsxs)(l.kC,{alignItems:"center",justifyContent:"start",children:[(0,i.jsx)(l.xv,{size:"100",inline:!0,children:t._('Collaborators', ' - ', ' -- ')}),(0,i.jsx)(x.Z,{}),(0,i.jsx)(l.xv,{inline:!0,size:"100",weight:"bold",children:(0,i.jsx)(l.rU,{inline:!0,target:"blank",href:f.Z.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE,underline:"hover",children:t._('Learn more', ' - ', ' -- ')})})]});return(0,i.jsx)(d,{label:a,labelId:"collaborators",children:(0,i.jsx)(v,{board:e,onCollaboratorInviteClick:o})})}function P({collaboratorInvitesEnabled:e,isCollaborative:o,onCheckboxChange:t}){const a=(0,c.ZP)();return o&&(0,i.jsx)(b,{label:a._('Let collaborators add people', 'BoardForm.BoardFormCollaboratorsInviteToggle', 'Form label'),labelId:"collaboratorInvitesEnabledCheckbox",children:(0,i.jsx)(l.XZ,{checked:e,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:t})})}function j({description:e,descriptionValidatorErrors:o,onChange:t}){const a=(0,c.ZP)(),s="boardEditDescription";return(0,i.jsx)(d,{label:a._('Description', 'BoardForm.BoardFormDescription', ' Form field label'),labelId:s,children:(0,i.jsx)(l.Kx,{errorMessage:o.join(", "),id:s,name:"description",onChange:t,placeholder:a._('What\'s your board about?', ' - ', ' -- '),value:e})})}const A=({children:e})=>(0,i.jsx)(l.xu,{paddingX:8,role:"list",children:a.Children.map(e,((o,t)=>o&&(0,i.jsx)(l.xu,{role:"listitem",marginBottom:t===a.Children.count(e)-1?1:8,children:o},t)))});var z=t(27255);function y({isProtectedToggler:e,isToggleDisable:o,onChange:t,onCheckboxChange:s,privacy:r}){const n=(0,c.ZP)();if(!0===e)return(0,i.jsx)(b,{label:n._('Protected board (not listed on user\'s profile)', 'BoardForm.BoardFormSecretToggle', 'protected board'),labelId:"protected",children:(0,i.jsx)(l.xu,{paddingY:2,children:(0,i.jsx)(l.rs,{onChange:t,switched:r===z.Z.BoardPrivacy.PROTECTED,id:"protected",disabled:o})})});if(r!==z.Z.BoardPrivacy.PROTECTED){const e=n._('Keep this board secret', 'BoardForm.BoardFormSecretToggle', 'Caption for board settings to set visibility'),t=(0,i.jsx)(a.Fragment,{children:(0,i.jsxs)(l.xv,{color:"subtle",size:"300",children:[n._('So only you and collaborators can see it.', 'BoardForm.BoardFormSecretToggle', 'notifying the board owner only they and the collaborators can see the board if it set to secret')," ",(0,i.jsx)(l.rU,{inline:!0,target:"blank",href:f.Z.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE,underline:"hover",children:n._('Learn more', 'BoardForm.BoardFormSecretToggle', 'Link to learn more about secret boards')})]})});return(0,i.jsx)(b,{label:e,labelId:"secret",subtext:t,children:(0,i.jsx)(l.kC,{alignItems:"center",justifyContent:"start",children:(0,i.jsx)(l.XZ,{checked:r===z.Z.BoardPrivacy.SECRET,id:"secret",name:"secret",onChange:s,disabled:o})})})}return null}function w({allowHomefeedRecommendations:e,onCheckboxChange:o}){const t=(0,c.ZP)();return(0,i.jsx)(b,{label:t._('Personalization', 'BoardForm.BoardFormRecommendationToggle', 'form label'),labelId:"recommendation",subtext:(0,i.jsx)(l.xv,{color:"subtle",size:"300",children:t._('Show Pins inspired by this board in your home feed.', 'BoardForm.BoardFormRecommendationToggle', 'Caption for board settings to set visibility')}),children:(0,i.jsx)(l.XZ,{checked:e,id:"recommendation",name:"recommendation",onChange:o})})}function B({name:e,nameValidatorErrors:o,onChange:t}){const a=(0,c.ZP)();return(0,i.jsx)(d,{label:a._('Name', 'BoardForm.BoardFormTitleInput', 'Form field label'),labelId:"boardEditName",children:(0,i.jsx)(l.nv,{errorMessage:o.join(", "),id:"boardEditName",name:"boardName",onChange:t,placeholder:a._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:e})})}var I=t(66699),k=t(497997),S=t(50286),T=t(121151),E=t(343341),D=t(134906);function R(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}const M=(0,a.lazy)((()=>Promise.all([t.e(67631),t.e(13021)]).then(t.bind(t,213021)))),Z=(e,o)=>(0,D.Gy)({max:e,maxErrorString:(0,I.Z)(o._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a string is too long', 'Validation error when a string is too long'),{maxLength:e})}),L=e=>[Z(z.Z.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION,e)],O=e=>[(0,D.aH)({message:e._('Don\'t forget to name your board!', ' - ', ' -- ')}),Z(z.Z.MAX_CHARS_FOR_BOARD_TITLE,e)],F=({condition:e,children:o})=>e?(0,i.jsx)(l.xu,{position:"absolute",zIndex:T.b7,children:o}):o;class q extends a.Component{constructor(e){super(e),R(this,"handleChangeName",(({value:e})=>{const o=(0,D.FU)(O(this.props.i18n),e);this.setState({name:e,nameValidatorErrors:o})})),R(this,"handleChangeDescription",(({value:e})=>{const o=(0,D.FU)(L(this.props.i18n),e);this.setState({description:e,descriptionValidatorErrors:o})})),R(this,"handleChangePrivacyToggle",(({value:e})=>{let o="public";e&&(o=this.props.isAdAccount?"protected":"secret"),this.state.privacy!==o&&this.setState({privacy:o})})),R(this,"handleEnableSecret",(()=>{this.setState({privacy:"secret",showSecretConfirmation:!1})})),R(this,"handleHideSecretConfirmation",(()=>{this.setState({showSecretConfirmation:!1})})),R(this,"handleChangeRecommendationToggle",(({value:e})=>{this.setState({allowHomefeedRecommendations:e})})),R(this,"handleChangeCollabBoardEmail",(({value:e})=>{this.setState({collab_board_email:e})})),R(this,"handleChangeCollaboratorInvitesEnabled",(({value:e})=>{this.setState({collaboratorInvitesEnabled:e})})),R(this,"handleCheckboxChange",(e=>({event:o,checked:t})=>e({event:o,value:t}))),R(this,"handleSubmit",(e=>{const{onSubmit:o}=this.props,{collab_board_email:t,collaboratorInvitesEnabled:a,description:s,name:r,privacy:l,allowHomefeedRecommendations:i}=this.state;if(e.preventDefault&&e.preventDefault(),this.submitDisabled())return;const n=r.trim(),d=s.trim();this.setState({submitting:!0,submitError:""}),o({name:n,collab_board_email:t,collaborator_invites_enabled:a,description:d,privacy:l,allow_homefeed_recommendations:i}).then((()=>{this.setState({submitting:!1})})).catch((e=>{let o=this.props.i18n._('Uh oh! Something went wrong.', ' - ', ' -- ');if(e.message){const{message:t,message_detail:a}=e;o=a?`${t} ${a}`:t}else"string"==typeof e&&(o=e);this.setState({submitting:!1,submitError:o})}))})),R(this,"handleShowBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!0})})),R(this,"handleHideBoardCoverEditModal",(()=>{this.setState({showBoardCoverEdit:!1})})),R(this,"handleShowCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!0})})),R(this,"handleHideCollaboratorsModal",(()=>{this.setState({showCollaboratorsModal:!1})})),R(this,"handleSaveBoardCoverEditModal",(e=>{this.handleHideBoardCoverEditModal();const{onCropChange:o}=this.props;o&&o(e)}));const{board:{collab_board_email:o,collaborator_invites_enabled:t,description:a,name:s,pin_count:r,privacy:l,allow_homefeed_recommendations:i}}=e;this.state={collab_board_email:o,description:a,name:s,pin_count:r,privacy:l,allowHomefeedRecommendations:i,collaboratorInvitesEnabled:t,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showCollaboratorsModal:!1,showSecretConfirmation:!1,submitting:!1,previousName:s,previousDescription:a,previousPrivacy:l}}static getDerivedStateFromProps(e,o){const t={};return e.board.name&&e.board.name!==o.previousName&&(t.previousName=e.board.name,t.nameValidatorErrors=(0,D.FU)(O(e.i18n),e.board.name)),e.board.description&&e.board.description!==o.previousDescription&&(t.previousDescription=e.board.description,t.descriptionValidatorErrors=(0,D.FU)(L(e.i18n),e.board.description)),e.board.privacy&&e.board.privacy!==o.previousPrivacy&&(t.previousPrivacy=e.board.privacy),t}getFormFooter(){const{submitText:e}=this.props,{submitError:o}=this.state;return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(l.kC,{alignItems:"center",justifyContent:"end",wrap:!0,children:(0,i.jsx)(l.xu,{children:(0,i.jsx)(l.kC,{alignItems:"stretch",justifyContent:"start",children:(0,i.jsx)(l.xu,{height:48,children:(0,i.jsx)(l.zx,{color:"red",disabled:this.submitDisabled(),onClick:this.handleSubmit,size:"lg",text:e,type:"submit"})})})})}),o&&(0,i.jsx)(l.xu,{paddingX:1,"aria-live":"polite",tabIndex:"0",children:(0,i.jsx)(l.xv,{color:"error",children:o})})]})}submitDisabled(){const{descriptionValidatorErrors:e,name:o,nameValidatorErrors:t,submitting:a}=this.state;return!o||t.length>0||e.length>0||a}render(){const{board:e,board:{archived_by_me_at:o,cover_pin:t,id:n,is_collaborative:d},coverImageHeight:c,coverImageWidth:_,currentUserIsOwner:h,handleBoardLeave:b,isAdAccount:m,isAdAccountOwner:v,isDeletable:x,isDesktop:f,isEditable:z,isNameAndSecretView:I,onClose:S,onDeleteButtonClick:E,requestContext:D,title:R,useModalWithNoLayer:Z}=this.props,{allowHomefeedRecommendations:L,collab_board_email:O,collaboratorInvitesEnabled:q,description:N,descriptionValidatorErrors:U,name:H,nameValidatorErrors:X,pin_count:V,privacy:G,showBoardCoverEdit:Y,showCollaboratorsModal:$,showSecretConfirmation:W}=this.state,J=z&&V>0;let K=(0,i.jsxs)(A,{children:[J&&(0,i.jsx)(u,{coverPin:t,handleShowBoardCoverEditModal:this.handleShowBoardCoverEditModal}),(0,i.jsx)(B,{name:H,nameValidatorErrors:X,onChange:this.handleChangeName}),(0,i.jsx)(j,{description:N,descriptionValidatorErrors:U,onChange:this.handleChangeDescription}),h&&!!b&&(0,i.jsx)(C,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,i.jsx)(l.xu,{marginBottom:-7,children:(0,i.jsx)(l.xv,{size:"100",children:this.props.i18n._('Settings', 'BoardForm.BoardForm', 'Section heading in board edit form')})}),(0,i.jsx)(y,{isProtectedToggler:!!m,isToggleDisable:!!m&&!v,onChange:this.handleChangePrivacyToggle,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle),privacy:G}),!o&&(0,i.jsx)(w,{allowHomefeedRecommendations:L,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,i.jsx)(p,{hasCollabBoardEmail:O,isCollaborative:d,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),(0,i.jsx)(P,{collaboratorInvitesEnabled:q,isCollaborative:d,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollaboratorInvitesEnabled)}),x&&(0,i.jsxs)(l.xu,{marginTop:-6,paddingY:4,children:[(0,i.jsx)(l.xv,{size:"100",children:this.props.i18n._('Action', 'BoardForm.BoardForm.Action', 'Section heading in board edit form')}),(0,i.jsxs)(l.iP,{onTap:E,children:[(0,i.jsx)(l.xu,{marginTop:2,marginBottom:1,"data-test-id":"deleteBoardButton",children:(0,i.jsx)(l.X6,{size:"400",children:this.props.i18n._('Delete board', 'BoardForm.Delete', 'Delete board label')})}),(0,i.jsx)(l.xv,{size:"300",color:"subtle",children:this.props.i18n._('Delete this board and all its Pins forever.', 'BoardForm.BoardForm.Delete.Label', 'Delete board warning text')}),(0,i.jsx)(l.xv,{size:"300",color:"subtle",children:this.props.i18n._('You can\'t undo this!', 'BoardForm.BoardForm.Delete.LabelTwo', 'Delete board warning text')})]})]})]});h?I&&(K=(0,i.jsxs)(A,{children:[(0,i.jsx)(B,{name:H,nameValidatorErrors:X,onChange:this.handleChangeName}),(0,i.jsx)(y,{isProtectedToggler:!!m,isToggleDisable:!!m&&!v,onChange:this.handleChangePrivacyToggle,privacy:G,onCheckboxChange:this.handleCheckboxChange(this.handleChangePrivacyToggle)})]})):K=(0,i.jsxs)(A,{children:[!!b&&(0,i.jsx)(C,{board:e,onCollaboratorInviteClick:this.handleShowCollaboratorsModal}),(0,i.jsx)(p,{hasCollabBoardEmail:O,isCollaborative:d,onCheckboxChange:this.handleCheckboxChange(this.handleChangeCollabBoardEmail)}),!o&&(0,i.jsx)(w,{allowHomefeedRecommendations:L,onCheckboxChange:this.handleCheckboxChange(this.handleChangeRecommendationToggle)}),(0,i.jsx)(l.xv,{color:"subtle",size:"300",children:(0,g.nk)(this.props.i18n._('Only the board\u2019s owner ({{ boardOwner }}) can manage the rest of its features', 'BoardForm.CollaboratorPermissionsCopy', 'Copy on board edit form letting collaborators know of their permissions on a board'),{boardOwner:(0,i.jsx)(l.xv,{color:"subtle",inline:!0,size:"300",weight:"bold",children:e.owner.full_name})})})]});const Q=Z?l.u_:T.ZP,ee=this.props.i18n._('Change board cover', 'BoardForm.BoardCoverEdit.heading', 'Change board cover heading'),oe=(0,i.jsxs)(l.xu,{paddingY:8,position:"relative",children:[(0,i.jsx)(l.X6,{align:"center",size:"500",children:ee}),(0,i.jsx)(l.xu,{position:"absolute",top:!0,left:D.isRTL,right:!D.isRTL,paddingY:8,paddingX:6,children:(0,i.jsx)(l.hU,{accessibilityLabel:this.props.i18n._('Cancel change board cover', 'BoardForm.BoardCoverEdit.cancel', 'Cancel change board cover heading'),icon:"cancel",iconColor:"darkGray",onClick:this.handleHideBoardCoverEditModal})})]});return(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)(F,{condition:!!Z,children:!Y&&!$&&(0,i.jsx)(Q,{accessibilityModalLabel:this.props.i18n._('Board form', 'BoardForm.BoardForm', 'Accessibility label on board form'),size:"sm",onDismiss:S,footer:this.getFormFooter(),heading:R,children:(0,i.jsx)(l.xu,{marginEnd:"auto",marginStart:"auto",rounding:2,children:(0,i.jsx)("form",{method:"post",onSubmit:this.handleSubmit,children:K})})})}),Y&&f&&(0,i.jsx)(k.Z,{children:(0,i.jsx)(M,{boardId:n,boardName:H,coverPinId:null==t?void 0:t.pin_id,frameHeight:c,frameWidth:_,heading:oe,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})}),W&&(0,i.jsx)(r.Z,{confirmButtonLabel:this.props.i18n._('Make secret', 'Setting the boards visibility to secret', 'Setting the boards visibility to secret'),heading:this.props.i18n._('Are you sure?', 'Warning label asking users to be sure of their action', 'Warning label asking users to be sure of their action'),message:this.props.i18n._('If you make this board secret, some active ads will stop running', 'Explicitly warning users of the board visibility action they are doing', 'Explicitly warning users of the board visibility action they are doing'),onCancel:this.handleHideSecretConfirmation,onConfirm:this.handleEnableSecret}),$&&(0,i.jsx)(s.Z,{board:e,fromBoardEditModal:!0,onDismiss:this.handleHideCollaboratorsModal})]})}}function N(e){const o=(0,c.ZP)(),t="desktop"===(0,S.ZP)();return(0,i.jsx)(q,{...e,isDesktop:t,i18n:o,requestContext:(0,_.B)(),toastManagerContext:(0,E.F9)()})}R(q,"defaultProps",{isNameAndSecretView:!1})},169158:(e,o,t)=>{t.d(o,{Z:()=>i});var a=t(667294),s=t(823493),r=t.n(s);function l(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}class i extends a.PureComponent{constructor(...e){super(...e),l(this,"setContainerRef",(e=>{this.containerRef=e})),l(this,"fetchMoreIfNecessary",r()((()=>{const{fetchMore:e,scrollBuffer:o}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:o,scrollHeight:t},a)=>e+o+(a?a(o):2*o)>t)(this.containerRef,o)&&e()}),200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},681650:(e,o,t)=>{t.d(o,{I:()=>n,Z:()=>i});var a=t(845772),s=t(784590),r=t(217468);const l=({boardId:e,ownerUsername:o,ownerName:t,ownerImgSrc:l})=>{const{anyEnabled:i}=(0,r.t)("web_m10n_business_access_orbac_ga")(),n=(0,a.Z)(),{data:d,isLoaded:c}=(0,s.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...i&&n?{orbac_subject_id:n}:{}}}),_=[{name:t,src:l,href:`/${o}/`,isDim:!1}];return c&&d&&d.length>0&&d.forEach((e=>{_.push({name:e&&e.invited_user?e.invited_user.full_name:"",src:e&&e.invited_user?e.invited_user.image_medium_url:"",href:e&&e.invited_user?`/${e.invited_user.username}/`:"",isDim:e&&["new","contact_request_not_approved"].includes(e.status)})})),_},i=l;function n({children:e,...o}){return e(l(o))}},161702:(e,o,t)=>{t.d(o,{Z:()=>W});var a=t(667294),s=t(319915),r=t(947599),l=t(499128),i=t(898781),n=t(343341),d=t(883119),c=t(785893);const _=(0,a.lazy)((()=>t.e(4603).then(t.t.bind(t,774855,23))));function h({linkURL:e,onDidFocus:o,onDidClickCopyButton:t}){const a=(0,i.ZP)(),{showOneToast:h}=(0,n.F9)(),u=a._('Copy link', '[button] copy a URL link shown, to paste in another place', '[button] copy a URL link shown, to paste in another place');return(0,c.jsxs)(d.xu,{display:"flex",alignItems:"center",paddingX:4,children:[(0,c.jsx)(d.xu,{flex:"grow",marginEnd:2,children:(0,c.jsx)(d.nv,{id:"copylinkurl",onChange:()=>{},onFocus:o,size:"lg",type:"url",value:e})}),(0,c.jsx)(s.Z,{name:"SafeSuspense_CopyableLink_CopyToClipboard",children:(0,c.jsx)(r.Z,{fallback:(0,c.jsx)(d.zx,{text:u,disabled:!0}),children:(0,c.jsx)(_,{text:e,onCopy:(e,o)=>{o&&h((({hideToast:e})=>(0,c.jsx)(l.ZP,{onHide:e,text:a._('Link copied to clipboard!', 'toast message to confirm if users copied the url successfully', 'toast message to confirm if users copied the url successfully')}))),t()},children:(0,c.jsx)(d.zx,{text:u,size:"lg"})})})})]})}var u=t(720247),b=t(845772),p=t(837727),m=t(217468),g=t(407043),v=t(580744);const x=(e,o)=>({invite_category:4,invite_channel:12,object_type:p.d.BOARD,object_id:e,...o?{orbac_subject_id:o}:{}}),f=e=>({component:13305,element:10921,object_id_str:e,view_type:5,view_parameter:3059});function C({boardId:e}){const{logContextEvent:o}=(0,g.v)(),[t,s]=(0,a.useState)(!1),[r,l]=(0,a.useState)(null),{anyEnabled:i}=(0,m.t)("web_m10n_business_access_orbac_ga")(),n=(0,b.Z)();(0,a.useEffect)((()=>{if(!r){const o=x(e,i?n:""),{cancel:t,promise:a}=(0,u.Z)(v.Z.createShareInviteData(o));return a.then((e=>l(e))),()=>{t()}}}),[]);const d=r?r.invite_url:"...",_=()=>{null===r||t||(s(!0),v.Z.logShareInvite(x(e),r))};return(0,c.jsx)(h,{linkURL:d,onDidClickCopyButton:()=>{o({event_type:101,...f(e)}),_()},onDidFocus:_})}var P=t(787294),j=t(116303),A=t(784590);function z({boardId:e,invitedUserId:o,isInvited:t,onClick:s,buttonSize:r="sm"}){const l=(0,i.ZP)(),{anyEnabled:n}=(0,m.t)("web_m10n_business_access_orbac_ga")(),_=(0,b.Z)(),h=(0,A.Z)({name:"BoardInviteResource",options:{board_id:e,invited_user_id:o,...n&&_?{orbac_subject_id:_}:{}}});(0,a.useEffect)((()=>{h.refresh()}),[]);const u={text:l._('Invite', '[button] invite someone to collaborate on a board', 'it appears in the list expanded when click invite button at the top of board page'),color:"red",disabled:!1};return h.isFetching&&(u.text=l._('Loading', '[button] disabled button status text when checking if the user has been invited', 'it appears in the list expanded when click invite button at the top of board page'),u.color="gray",u.disabled=!0),(t||h.isLoaded&&h.data)&&(u.text=l._('Invited', '[button] disabled button status text when a user has been invited to a board', 'it appears in the list expanded when click invite button at the top of board page'),u.color="gray",u.disabled=!0),(0,c.jsx)(d.zx,{fullWidth:!0,color:u.color,size:r,disabled:u.disabled,onClick:s,text:u.text})}var y=t(381297),w=t(326285),B=t(936776),I=t(172071),k=t(730447),S=t(717615),T=t(19121),E=t(231947),D=t(98265);function R({boardId:e,onInvitesDidUpdate:o,onInviteDidComplete:t,shareSuggestions:s}){const{logContextEvent:r}=(0,g.v)(),l=(0,i.ZP)(),{anyEnabled:n}=(0,m.t)("web_m10n_business_access_orbac_ga")(),_=(0,T.Z)(),h=(0,S.Z)(),u=n?(0,E.lJ)(_,h):"",[b,p]=(0,a.useState)(""),[v,x]=(0,a.useState)([]),[f,C]=(0,a.useState)({}),[P,A]=(0,a.useState)({}),R=e=>{switch(e.type){case"user":case"user_share_suggestion":return e.username||l._('On Pinterest', 'is a user of Pinterest', 'is a user of Pinterest');case"emailcontact":case"email_share_suggestion":return e.email||l._('Email Contact', 'invited user has an email', 'invited user has an email')}return""},M=(a,s)=>{const{id:l,full_name:i,debug_reason:n}=a;let d="";n&&(d=n.reason),((o,t)=>{r({event_type:101,component:13029,element:b?1044:1039,object_id_str:e,view_type:5,view_parameter:3059,aux_data:{entered_query:b,result_index:o+1,rs:t}})})(s,d);const c={...f};c[l]=!0,C(c),(0,D.pS)(e,[l],u).then((()=>{t(i,!0)})).catch((e=>{t(i,!1,e);const o={...f};o[l]=!1,C(o)})).finally(o)};let Z=s;return b&&(Z=v),(0,c.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",minHeight:0,children:[(0,c.jsx)(d.xu,{paddingY:4,flex:"none",display:"flex",alignItems:"center",children:(0,c.jsx)(d.xu,{flex:"grow",children:(0,c.jsx)(k.Z,{onTypeaheadSuggestionsChange:e=>{I.Z.increment("web_contacts_search",1,{source:"board_invite"}),x(e)},resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:{suggestion_type:"group_board",count:25,...u?{orbac_subject_id:u}:Object.freeze({})},value:b,children:(0,c.jsx)(d.xu,{paddingX:4,children:(0,c.jsx)(d.Um,{accessibilityLabel:l._('Search for a name or email', 'accessible label for contact search input field', 'accessible label for contact search input field'),id:"search",onChange:({value:e})=>{p(e),r({event_type:4113,component:13029,element:1043,view_parameter:3059,aux_data:{entered_query:e}})},placeholder:l._('Search by name or email', 'search input field prompt for finding contacts', 'search input field prompt for finding contacts'),size:"lg",value:b})})})})}),(0,c.jsxs)(d.xu,{overflow:"scrollY",maxHeight:414,children:[Z.map(((o,t)=>{const a=o.username?`/${o.username}/`:null;return(0,c.jsx)(d.xu,{children:(0,c.jsx)(y.Z,{imageUrl:o.image_medium_url||"",name:o.full_name||o.email,title:o.full_name||o.email,subtitle:R(o),accessory:(0,c.jsx)(z,{boardId:e,invitedUserId:o.id,isInvited:(s=o.id,!!f[s]),onClick:()=>M(o,t),buttonSize:"lg"}),linkURL:a})},t);var s})),b&&((0,B.Z)(b)?(0,c.jsx)(y.Z,{name:b,title:b,accessory:(L=!!P[b],O=()=>{const a=b;if(!(0,B.Z)(a))return;const s={...P};s[a]=!0,A(s),(0,D.OA)(e,[a],u).then((()=>{t(a,!0),p("")})).catch((e=>{t(a,!1,e);const o={...P};o[a]=!1,A(o)})).finally(o)},F="lg",(0,c.jsx)(d.zx,{fullWidth:!0,color:L?"gray":"red",disabled:!!L,size:F,onClick:O,text:L?l._('Invited', '[button] disabled button status text when a user has been invited to a board', '[button] disabled button status text when a user has been invited to a board'):l._('Invite', '[button] invite someone to collaborate on a board', '[button] invite someone to collaborate on a board')}))}):(0,c.jsx)(w.Z,{iconNode:(0,c.jsx)(j.Z,{name:b,size:"md"}),title:b,subtitle:l._('Keep typing!', 'boardCollabInviterForm.label', 'Message for user to keep typing')}))]})]});var L,O,F}var M=t(349700);function Z({boardId:e}){const{logContextEvent:o}=(0,g.v)(),t=(0,i.ZP)(),s=(0,n.F9)(),{anyEnabled:r}=(0,m.t)("web_m10n_business_access_orbac_ga")(),_=(0,b.Z)(),{refresh:h}=(0,A.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"new,accepted,contact_request_not_approved",sort:"viewer_first",include_inactive:!0,...r&&_?{orbac_subject_id:_}:{}},noCache:!0}),{refresh:u}=(0,A.Z)({name:"BoardInvitesResource",options:{board_id:e,field_set_key:"boardEdit",status_filters:"pending_approval",...r&&_?{orbac_subject_id:_}:{}},noCache:!0}),{data:p,isLoaded:v}=(0,A.Z)({name:"ShareSuggestionsResource",options:{page_size:5,field_set_key:"default",suggestion_type:"group_board",..._?{orbac_subject_id:_}:{}},noCache:!0});(0,a.useEffect)((()=>{o({event_type:7120,object_id_str:e,view_type:5,view_parameter:3059})}),[]),(0,a.useEffect)((()=>{if(v){const e=p&&p.length>0?7511:7512;o({event_type:e,component:13305,element:10592,view_type:5,view_parameter:3059})}}),[v]);const x=(e,o=!1)=>{s.showOneToast((({hideToast:t})=>(0,c.jsx)(l.ZP,{duration:3e3,onHide:t,text:e,variant:o?"error":void 0})))};return v?(0,c.jsx)(R,{boardId:e,onInvitesDidUpdate:()=>{h(),u()},onInviteDidComplete:(e,o,a)=>{o?x(t._('1 invite sent!', 'BoardCollabInviteFormContainer.showInviteSuccessToast.text', 'Toast for successfully sending invitation of collaborating a board')):((e,o)=>{const a=t._('Failed to invite {{userIdentifier}} to collaborate', 'Toast for failing to send invitation of collaborating a board', 'Toast for failing to send invitation of collaborating a board');x(o&&o.message?o.message:(0,M.nk)(a,{userIdentifier:e}).join(""),!0)})(e,a)},shareSuggestions:p||[]}):(0,c.jsx)(d.xu,{display:"flex",justifyContent:"center",paddingY:12,width:"100%",children:(0,c.jsx)(d.$j,{accessibilityLabel:t._('Loading contacts', 'BoardCollab.BoardCollabInviteFormContainer', 'Accessibility label on loading spinner'),show:!0})})}const L="INVITE_SETTING",O="REQUEST_TO_JOIN_SETTING";function F({boldHeading:e,setting:o,viewerIsOwner:t}){const s=(0,i.ZP)(),r={0:{name:s._('Do (almost) everything', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:s._('Add, move or delete Pins and sections, comment and react', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting')},1:{name:s._('Save and comment', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:t?s._('Save Pins, organize them, comment and react', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting'):s._('Save Pins, organize them, comment, and react. For more permissions, reach out to the board owner!', 'save.board.BoardPage.ModalContents.BoardCollabSettings.SaveOnly.Collab', 'Text explaining collaborator permission setting')},[L]:{name:s._('Invite other people', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:s._('Collaborators can invite others to this board', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting')},[O]:{name:s._('Board requests', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Heading explaining collaborator permission setting'),description:s._('People can request to join this board', 'save.board.BoardPage.ModalContents.BoardCollabSettings', 'Text explaining collaborator permission setting')}};return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(d.xv,{color:"default",size:e?"300":"200",weight:e?"bold":"normal",children:r[o].name}),(0,c.jsx)(d.xu,{paddingY:1,children:(0,c.jsx)(d.xv,{color:"subtle",size:"300",children:r[o].description})})]})}var q=t(353068),N=t(121151),U=t(715519),H=t(925927),X=t(780280);function V({board:e,currentPermissionLevel:o,fromBoardEditModal:t,navigateToPermissions:s,onDismiss:r}){var l;const n=(0,i.ZP)(),_="number"==typeof e.collaborator_count&&e.collaborator_count>0,[h,u]=(0,a.useState)(!_),b=(0,X.B)(),p=(0,T.Z)(),m=(0,H.k6)(),g=p.isAuth&&(null===(l=e.owner)||void 0===l?void 0:l.id)===p.id,v=g||e.collaborator_invites_enabled,x=h&&!_||!h;return(0,c.jsx)(U.k,{boardName:e.name,pendingOwnershipTransfer:e.pending_ownership_transfer,viewerIsOwner:g,children:(0,c.jsx)(N.ZP,{_dangerouslyDisableScrollBoundaryContainer:!0,accessibilityModalLabel:h?n._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a modal'):n._('Collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a modal'),footer:v&&!h?(0,c.jsx)(d.iP,{onTap:()=>u(!0),rounding:8,children:(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.hU,{accessibilityLabel:n._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'accessibility label on icon button'),icon:"add",bgColor:"red",iconColor:"white"}),(0,c.jsx)(d.xu,{paddingX:3,children:(0,c.jsx)(d.xv,{size:"300",weight:"bold",children:n._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Clickable text to show invite form')})})]})}):null,heading:(0,c.jsxs)(d.xu,{marginStart:5,padding:8,children:[t&&(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!b.isRTL,right:b.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:n._('Back', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a button'),icon:"arrow-back",iconColor:"darkGray",onClick:r})}),(0,c.jsx)(d.X6,{align:"center",size:"500",children:h?n._('Invite collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Heading for a modal'):n._('Collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Heading for a modal')})]}),onDismiss:r,children:(0,c.jsxs)(d.xu,{marginBottom:5,children:[x&&(0,c.jsxs)(d.xu,{paddingX:6,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:g?n._('Collaborators can...', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Text before explaining current collaborator permission setting'):n._('You can...', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Text before explaining current collaborator permission setting')})}),(0,c.jsxs)(d.xu,{alignItems:"start",display:"flex",justifyContent:"between",marginBottom:4,children:[(0,c.jsx)(d.xu,{width:"60%",children:(0,c.jsx)(F,{boldHeading:!0,viewerIsOwner:g,setting:o})}),g&&(0,c.jsx)(d.hU,{accessibilityLabel:n._('Edit board permissions', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on icon button'),icon:"arrow-forward",onClick:s})]})]}),h?(0,c.jsxs)(d.xu,{paddingX:2,children:[(0,c.jsx)(C,{boardId:e.id}),(0,c.jsx)(Z,{boardId:e.id})]}):(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(d.xu,{paddingX:6,paddingY:5,children:(0,c.jsx)(d.xv,{size:"100",children:n._('Collaborators', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Header before listing collaborators on a group board')})}),(0,c.jsx)(q.Z,{board:e,scrollInfo:null,onBoardLeave:()=>{const e=p.isAuth?`/${p.username}`:"/";m.replace(e)},renderInvite:(e,o,t)=>{if(!e.invited_user)return null;const a={invite:e,invitedUser:e.invited_user,onBoardLeave:o,onInviteDidUpdate:t,useGestaltModal:!0,isDim:!1};return(0,c.jsx)(P.Z,{...a})}})]})]})})})}var G=t(966338),Y=t(162158);function $({board:{collaborator_invites_enabled:e,collaborator_requests_enabled:o,id:t},currentPermissionLevel:s,navigateToCollaborators:r,onDismiss:l}){const{logContextEvent:n}=(0,g.v)(),_=(0,i.ZP)(),[h,u]=(0,a.useState)(s),[b,p]=(0,a.useState)(e),[m,v]=(0,a.useState)(o),[x,f]=(0,a.useState)(!1),C=(0,X.B)(),P=(0,G.useDispatch)();return(0,c.jsx)(N.ZP,{accessibilityModalLabel:_._('Board permissions', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a modal'),heading:(0,c.jsxs)(d.xu,{paddingY:8,position:"relative",children:[(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:!C.isRTL,right:C.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:_._('Back', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a button'),icon:"arrow-back",iconColor:"darkGray",onClick:r})}),(0,c.jsx)(d.X6,{align:"center",size:"500",children:_._('Collaborators can...', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Heading for a modal')}),(0,c.jsx)(d.xu,{position:"absolute",top:!0,left:C.isRTL,right:!C.isRTL,paddingY:8,paddingX:6,children:(0,c.jsx)(d.hU,{accessibilityLabel:_._('Close', 'save.board.BoardPage.ModalContents.BoardCollaboratorsModal', 'Accessibility label on a button'),icon:"cancel",iconColor:"darkGray",onClick:l})})]}),footer:(0,c.jsx)(d.kC,{alignItems:"stretch",justifyContent:"end",children:(0,c.jsx)(d.zx,{color:"red",disabled:x||h===s&&b===e&&m===o,onClick:()=>{f(!0);const a={},r={view_type:5,view_parameter:3472};b!==e&&(a.collaborator_invites_enabled=b,n({event_type:b?106:107,element:11896,...r})),h!==s&&(a.collaborator_permissions_setting=h,n({event_type:8841,...r})),m!==o&&(a.collaborator_requests_enabled=m),P((0,Y.V)(t,a)).then((()=>l()))},size:"lg",text:_._('Done', 'save.board.BoardPage.ModalContents.PermissionsModal', 'Submit button on a form')})}),onDismiss:l,children:(0,c.jsxs)(d.xu,{paddingX:12,children:[(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:_._('Permissions', 'save.board.BoardPage.ModalContents.PermissionsModal', 'Heading before listing possible board permissions')})}),(0,c.jsxs)(d.kC,{alignItems:"center",children:[(0,c.jsx)(d.EU,{checked:0===h,id:"ALL",onChange:()=>u(0),value:0}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:0})})]}),(0,c.jsxs)(d.xu,{display:"flex",paddingY:6,"data-test-id":"invite-radio-container",children:[(0,c.jsx)(d.EU,{checked:1===h,id:"SAVE_ONLY",onChange:()=>u(1),value:1}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:1})})]}),(0,c.jsx)(d.xu,{paddingY:3,children:(0,c.jsx)(d.xv,{size:"100",children:_._('Invitations', 'save.board.BoardPage.ModalContents.PermissionsModal', 'Heading before group board invitation permission form setting')})}),(0,c.jsxs)(d.xu,{display:"flex",marginBottom:6,"data-test-id":"invite-checkbox-container",children:[(0,c.jsx)(d.XZ,{checked:b,id:"inviteSetting",onChange:({checked:e})=>p(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:L})})]}),(0,c.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,c.jsx)(d.XZ,{checked:m,id:"inviteSetting",onChange:({checked:e})=>v(e)}),(0,c.jsx)(d.xu,{marginEnd:12,paddingX:2,children:(0,c.jsx)(F,{setting:O})})]})]})})}function W({board:e,fromBoardEditModal:o,onDismiss:t}){const[s,r]=(0,a.useState)("collaboratorsView"),{collaborator_permissions_setting:l}=e;return"collaboratorsView"===s?(0,c.jsx)(V,{board:e,currentPermissionLevel:l,fromBoardEditModal:o,navigateToPermissions:()=>r("permissionsView"),onDismiss:t}):(0,c.jsx)($,{board:e,currentPermissionLevel:l,navigateToCollaborators:()=>r("collaboratorsView"),onDismiss:t})}},223123:(e,o,t)=>{t.d(o,{Z:()=>c});var a=t(966338),s=t(6637),r=t(332611),l=t(886858),i=t(379725),n=t(414327),d=t(782677);function c(){const e=(0,a.useDispatch)(),o=(0,a.useSelector)((e=>e.resources));return async function({boardCreateOptions:t,deprecatedSchemaForNormalization:a}){var c,_;const h=await s.ZP.create("BoardResource",t).callCreate(),u=null===(c=h.resource_response)||void 0===c?void 0:c.data,b=a?(0,d.Fv)(u,a):void 0;e((0,n.XM)("BoardResource",t,h,b)),e((0,r.fO)({event_type:20})),null!==(_=u.owner)&&void 0!==_&&_.id&&e((0,i.bi)("UserResource",{options:{user_id:u.owner.id,field_set_key:"save_behavior"}}));const p=o.BoardsResource||{},m=o.BoardsFeedResource||{};return Object.keys(p).forEach((o=>{var t;(0,l.k)(o).username===(null===(t=u.owner)||void 0===t?void 0:t.username)&&e((0,n.jB)("BoardsResource",o))})),Object.keys(m).forEach((o=>{var t;(0,l.k)(o).username===(null===(t=u.owner)||void 0===t?void 0:t.username)&&e((0,n.jB)("BoardsFeedResource",o))})),u}}},98265:(e,o,t)=>{t.d(o,{A8:()=>c,Cf:()=>n,GJ:()=>p,Jn:()=>i,OA:()=>s,SD:()=>_,pS:()=>r,q1:()=>l,sJ:()=>b,xx:()=>d});var a=t(6637);function s(e,o,t){return a.ZP.create("BoardEmailInviteResource",{board_id:e,emails:o,...t?{orbac_subject_id:t}:Object.freeze({})}).callCreate()}function r(e,o,t){return a.ZP.create("BoardInviteResource",{board_id:e,invited_user_ids:o,...t?{orbac_subject_id:t}:Object.freeze({})}).callCreate()}function l(e,o){return t=>a.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:o}).callUpdate().catch((()=>{}))}function i(e,o,t){return async o=>{const{invited_user:s,status:r,board:{id:l}}=e;s&&await a.ZP.create("accepted"===r?"BoardCollaboratorResource":"BoardInviteResource",{ban:t,board_id:l,field_set_key:"boardEdit",invited_user_id:s.id}).callDelete({showError:!1})}}function n(e,o){return async t=>{await a.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:o}}).callCreate(),t(function(e,o){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:o}}}(e,o))}}function d(e,o){return async t=>{await a.ZP.create("ApiResource",{url:`/v3/boards/${e}/collaborators/requests/ownership/`,data:{collaborator:o}}).callDelete(),t(function(e){return{type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}}}(e))}}const c=(e,o)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:o}}),_=(e,o)=>t=>{t(c(e,o)),a.ZP.create("BoardInviteResource",{board_id:e,invited_user_id:o.id}).callUpdate()};function h(e,o){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:o}}}function u(e,o){return a.ZP.create("BoardCollaboratorRequestResource",{board_id:e,requesting_user_id:o})}function b(e,o){return t=>{u(e,o).callCreate().catch((()=>{t(h(e,!1))})),t(h(e,!0))}}function p(e,o){return t=>{u(e,o).callDelete({showError:!1}).catch((()=>{t(h(e,!0))})),t(h(e,!1))}}},162158:(e,o,t)=>{t.d(o,{V:()=>l,u:()=>r});var a=t(6637),s=t(935409);const r=e=>o=>{const t={board_id:e};return a.ZP.create("BoardResource",t).callGet().then((e=>{const t=e&&e.resource_response&&e.resource_response.data;return t&&o((0,s.yT)(t)),e}))};function l(e,o,t){return(r,l)=>{const{boards:i}=l(),n=i[e],d=void 0===o.collaborator_requests_enabled||null===o.collaborator_requests_enabled?Object.freeze({}):{collaborator_requests_enabled:o.collaborator_requests_enabled},c={allow_homefeed_recommendations:o.allow_homefeed_recommendations,category:o.category,collab_board_email:o.collab_board_email,collaborator_invites_enabled:o.collaborator_invites_enabled,collaborator_permissions_setting:o.collaborator_permissions_setting,description:o.description,name:o.name,privacy:o.privacy,sensitivity:o.sensitivity||null,...t?{orbac_subject_id:t}:Object.freeze({}),...d};return r((0,s.yT)({...c,id:e})),a.ZP.create("BoardResource",{...c,board_id:e}).callUpdate().then((e=>{const t=e&&e.resource_response&&e.resource_response.data||o;return r((0,s.yT)(t)),e})).catch((e=>{throw n&&r((0,s.yT)(n)),e}))}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/90534-0fc2db985541b32b.mjs.map